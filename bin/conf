#! /usr/bin/env bash

function _git() {
    git --git-dir=$HOME/.git/ --work-tree=$HOME "$@"
}


function sync() {
    # Pull changes into bare repo and checkout
    cd ~/home.git
    git add .
    git commit -m "Syncing"
    git push
    _git fetch
    _get pull -f
}

function edit() {
    # Obviated by the nvim wrapper in ~/bin/vi
    export GIT_DIR="$HOME/.git"
    export GIT_WORK_TREE="$HOME"
    nvim "$@"
}

case $1 in
e|edit)
    vi "${@:2}"
    ;;
g|git)
    _git "${@:2}"
    ;;
add|commit|diff|log|pull|push|restore|status|switch)
    _git $1 "${@:2}"
    ;;
*)
    echo "Command $1 not recognized."
    exit
    ;;
esac

